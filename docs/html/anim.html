<html>
<head>
<title> Linux Video Stream Processing Tool - Examples</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="keywords" content="DVD, digital video, DV, encoder, divx,
DivX;-), lame, source, posix, avifile, opendivx, codec, linux, AC3,
program stream, video, audio, transcode, decoder, stream, YV12">
</head>

<body bgcolor=#CDB5CD>


<a name=top></a>
<table cellspacing="10" cellpadding="0" border="0" width="100%">
  <tr>
    <td align=left valign="top" width=30% bgcolor="#a0a0a0">
    <table border="0" cellpadding="10" cellspacing="3" font size=+2 bgcolor="#ffffff" width=100%>
      <td align="left" bgcolor="#e9e9e9"> <FONT
      FACE="Lucida,Helvetica"> <font>Picture Sequences</font>
    </tr>
    <tr>

      <td>

	   This chapter deals with sequences of single pictures in
	   various formats. You need a recent version of <i>ImageMagick</i> installed
	   to make the modules work. We will demonstrate how to make
	   animations from a bunch of pictures as well as splitting a
	   movie into individual frames.
	   
	   <ul>

    <li> <a href="#xmagick"> <FONT FACE="Lucida,Helvetica"> 
	  animations from picture sequences</font></a> <p>

    <li> <a href="#split"> <FONT FACE="Lucida,Helvetica"> 
	splitting a movie into frames</font></a> <p>

  </ul>
	   
      </td>
    </tr>
</table>
</table>


<a name=xmagick></a>
<table cellspacing="10" cellpadding="0" border="0" width="100%">
  <tr>
    <td align=left valign="top" width=30% bgcolor="#a0a0a0">
    <table border="0" cellpadding="10" cellspacing="3" font size=+2 bgcolor="#ffffff" width=100%>
      <td align="left" bgcolor="#e9e9e9">

      <font>animations from picture sequences</font>
    </tr>
    <tr>
      <td>

	   <font size=+2 color=blue>-x imlist</font><p>
	   
	   There is a nice tool out there called <i>motion</i> that
	   generates single picture snapshots from a video4linux
	   device.
	   We will use this tools as an example to generate the
	   pictures and convert the pictures to a movie.

	   Assuming we have a webcam on <code>/dev/video1</code>, try <p>
	   
	   <table>
	    <tr>
	      <td align=left valign="top" bgcolor="#ccffcc">
	      motion -d /dev/video1 -Q
	    </tr>
     </table><p>

     for a couple of seconds to generate snapshots in a directory try,
     that is based on time formats.
     The current year <code>2002/</code> is assumed to be the top level directory.<br>

     The import module <i>-x imlist</i> simply takes a list of frames
     that will make the final movie. One picture/frame per
     row. Generate the list with <p>

     <table>
       <tr>
	 <td align=left valign="top" bgcolor="#ccffcc">
	 find 2002/ ! -type d | sort > list
       </tr>
</table><p>

and start transcode to convert the sequence to a XviD codec movie
with. But wait a second. There is no auto-probing for this mode. Use
<i>tcprobe</i> on a single image and write down the frame
parameter. We find<p>

<code>
andromeda:transcode>tcprobe -i 2002/04/24/23/04/39-03.jpg <br>
[tcprobe] JPEG image<br>
[tcprobe] summary for 2002/04/24/23/04/39-03.jpg, (*) = not default, 0 = not detected<br>
import frame size: -g 352x288 [720x576] (*)<br>
       frame rate: -f 1.000 [25.000] frc=0 (*)<br>
   no audio track: use "null" import module for audio<br>
</code><p>

which provides the required information to start<p>

<table>
  <tr>
    <td align=left valign="top" bgcolor="#ccffcc">
    transcode -i list -x imlist,null -g 352x288 -y xvid,null -f 1 -o movie.avi
    -H 0
  </tr>
</table><p>

We choose a frame rate of one frame per second and switch auto-probing
and audio (import/export) completely off. This will generate our fancy
surveillance movie.
     
     
</table>
</table>


<a name=split></a>
<table cellspacing="10" cellpadding="0" border="0" width="100%">
  <tr>
    <td align=left valign="top" width=30% bgcolor="#a0a0a0">
    <table border="0" cellpadding="10" cellspacing="3" font size=+2 bgcolor="#ffffff" width=100%>
      <td align="left" bgcolor="#e9e9e9">

      <font>splitting a movie into frames</font>
    </tr>
    <tr>
      <td>

 <font size=+2 color=blue>-y ppm</font><p>
	   
	  Native support for writing to uncompressed PPM pictures is
	  provided by the "-y ppm" module.<p>

<table>
  <tr>
    <td align=left valign="top" bgcolor="#ccffcc">
    transcode [...] -y ppm
  </tr>
</table><p>

will extract all video frames to <code>frame-00000.ppm,
frame-00001.ppm, ... </code> but will quickly fill up your hard disk.      
Audio is discarded unless you provide a filename with option
"-m". Other native support is available for PGM "rawbits" image data with
option "-K" and file extension "png", which requires less space. 

<p>

 <font size=+2 color=blue>-y im</font><p>

For writing compressed frames for a file format supported by
<i>ImageMagick</i> and export module <i>-y im</i>
we must provide an identifier with option "-F".<p>

<table>
  <tr>
    <td align=left valign="top" bgcolor="#ccffcc">
    transcode [...] -y im -F tiff -c 0-20
  </tr>
</table><p>

writes 20 video frames as TIFF image format pictures to the files<p>
<code>frame.000000.tiff, frame.000001.tiff, ...,
frame.000019.tiff</code>.<p> Other possible and useful image formats
are "jpg" and "png". Please see the <i>ImageMagick</i> documentation
for supported image formats. It is possible to change the prefix with
option "-o".

</table>
</table>



<!-- hhmts start -->
Last modified: Thu May 16 12:51:42 CEST 2002
<!-- hhmts end -->

</body> </html>
